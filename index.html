<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Local Community Event Portal</title>
    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;700&family=Open+Sans:wght@400;600&display=swap" rel="stylesheet">
    <!-- External Stylesheet -->
    <link rel="stylesheet" href="styles.css">
    <!-- Internal Styles -->
    <style>
        body {
            background-color: #f5f5f5;
            background-image: url('Module/Module 1/HTML 5/LocalCommunityEventPortal/image/background.jpg');
            background-size: cover;
            background-attachment: fixed;
            font-family: 'Roboto', sans-serif;
        }

        /* Navigation Styles */
        #mainNav {
            background: rgba(255, 255, 255, 0.95);
            padding: 15px 0;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
        }

        #mainNav ul {
            list-style: none;
            padding: 0;
            margin: 0;
            display: flex;
            justify-content: center;
            gap: 30px;
        }

        #mainNav a {
            text-decoration: none;
            color: #333;
            font-weight: 600;
            padding: 5px 10px;
            border-radius: 5px;
            transition: all 0.3s ease;
        }

        #mainNav a:hover {
            background: #4CAF50;
            color: white;
        }

        /* Form Styles */
        .form-group {
            margin-bottom: 20px;
        }

        .form-group label {
            display: block;
            margin-bottom: 5px;
            color: #333;
            font-weight: 600;
        }

        .form-group input,
        .form-group select,
        .form-group textarea {
            width: 100%;
            padding: 10px;
            border: 2px solid #ddd;
            border-radius: 5px;
            font-size: 16px;
            transition: border-color 0.3s ease;
        }

        .form-group input:focus,
        .form-group select:focus,
        .form-group textarea:focus {
            border-color: #4CAF50;
            outline: none;
        }

        .form-group input:invalid,
        .form-group select:invalid {
            border-color: #f44336;
        }

        /* Table Styles */
        .admin-table {
            width: 100%;
            border-collapse: collapse;
            margin: 20px 0;
            background: white;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
        }

        .admin-table th,
        .admin-table td {
            padding: 12px;
            text-align: left;
            border-bottom: 1px solid #ddd;
        }

        .admin-table th {
            background: #4CAF50;
            color: white;
            font-weight: 600;
        }

        .admin-table tr:nth-child(even) {
            background: #f9f9f9;
        }

        .admin-table tr:hover {
            background: #f5f5f5;
        }

        /* Responsive Design */
        @media (max-width: 768px) {
            #mainNav ul {
                flex-direction: column;
                align-items: center;
                gap: 10px;
            }

            .event-card {
                margin: 10px 0;
            }

            .admin-table {
                display: block;
                overflow-x: auto;
            }

            .form-group input,
            .form-group select,
            .form-group textarea {
                font-size: 16px; /* Prevents zoom on mobile */
            }
        }

        /* Button Styles */
        button {
            padding: 12px 24px;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            font-size: 1.1em;
            transition: all 0.3s ease;
        }

        button:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 8px rgba(0,0,0,0.2);
        }

        button:active {
            transform: translateY(0);
        }
    </style>
</head>
<body>
    <!-- Navigation Section -->
    <nav id="mainNav">
        <ul>
            <li><a href="#home">Home</a></li>
            <li><a href="#events">Events</a></li>
            <li><a href="#news">News</a></li>
            <li><a href="#contact">Contact</a></li>
            <li><a href="help.html" target="_blank">Help</a></li>
        </ul>
    </nav>

    <!-- Welcome Banner Section -->
    <div id="mainHeader" class="banner" style="background: linear-gradient(135deg, #1e3c72 0%, #2a5298 100%); padding: 40px 20px; text-align: center; color: white; margin-bottom: 30px;">
        <h1 style="color: #ffffff; margin-bottom: 15px; font-size: 2.5em; text-shadow: 2px 2px 4px rgba(0,0,0,0.3);">Welcome to Our Community Portal</h1>
        <p style="font-size: 1.2em; margin: 0;">Join us for exciting local events! <span class="highlight" style="background-color: rgba(255,255,255,0.2); padding: 5px 10px; border-radius: 5px;">Special offer: First event free!</span></p>
    </div>

    <!-- Main Content Section -->
    <main>
        <section id="events" style="padding: 20px; background: rgba(255, 255, 255, 0.9); border-radius: 10px; margin: 20px auto; max-width: 1200px;">
            <h2 style="text-align: center; color: #333; margin-bottom: 30px; font-size: 2em;">Upcoming Events</h2>
            <div style="display: grid; grid-template-columns: repeat(3, 1fr); gap: 30px; padding: 20px;">
                <div class="event-card" style="text-align: center; background: white; padding: 15px; border-radius: 10px; box-shadow: 0 4px 8px rgba(0,0,0,0.1); transition: transform 0.3s ease;">
                    <img src="Module/Module 1/HTML 5/LocalCommunityEventPortal/image/music fest.jpg" alt="Music Fest" title="Music Fest" class="event-image" ondblclick="enlargeImage(this)" style="width: 100%; height: 200px; object-fit: cover; border-radius: 8px; cursor: pointer; transition: all 0.3s ease;">
                    <p style="margin-top: 10px; font-weight: bold; color: #333;">Music Festival</p>
                </div>
                <div class="event-card" style="text-align: center; background: white; padding: 15px; border-radius: 10px; box-shadow: 0 4px 8px rgba(0,0,0,0.1); transition: transform 0.3s ease;">
                    <img src="Module/Module 1/HTML 5/LocalCommunityEventPortal/image/food fair.jpg" alt="Food Fair" title="Food Fair" class="event-image" ondblclick="enlargeImage(this)" style="width: 100%; height: 200px; object-fit: cover; border-radius: 8px; cursor: pointer; transition: all 0.3s ease;">
                    <p style="margin-top: 10px; font-weight: bold; color: #333;">Food Fair</p>
                </div>
                <div class="event-card" style="text-align: center; background: white; padding: 15px; border-radius: 10px; box-shadow: 0 4px 8px rgba(0,0,0,0.1); transition: transform 0.3s ease;">
                    <img src="Module/Module 1/HTML 5/LocalCommunityEventPortal/image/art show.jpg" alt="Art Show" title="Art Show" class="event-image" ondblclick="enlargeImage(this)" style="width: 100%; height: 200px; object-fit: cover; border-radius: 8px; cursor: pointer; transition: all 0.3s ease;">
                    <p style="margin-top: 10px; font-weight: bold; color: #333;">Art Show</p>
                </div>
                <div class="event-card" style="text-align: center; background: white; padding: 15px; border-radius: 10px; box-shadow: 0 4px 8px rgba(0,0,0,0.1); transition: transform 0.3s ease;">
                    <img src="Module/Module 1/HTML 5/LocalCommunityEventPortal/image/yoga day.jpg" alt="Yoga Day" title="Yoga Day" class="event-image" ondblclick="enlargeImage(this)" style="width: 100%; height: 200px; object-fit: cover; border-radius: 8px; cursor: pointer; transition: all 0.3s ease;">
                    <p style="margin-top: 10px; font-weight: bold; color: #333;">Yoga Day</p>
                </div>
                <div class="event-card" style="text-align: center; background: white; padding: 15px; border-radius: 10px; box-shadow: 0 4px 8px rgba(0,0,0,0.1); transition: transform 0.3s ease;">
                    <img src="Module/Module 1/HTML 5/LocalCommunityEventPortal/image/culturla fest.jpg" alt="Cultural Fest" title="Cultural Fest" class="event-image" ondblclick="enlargeImage(this)" style="width: 100%; height: 200px; object-fit: cover; border-radius: 8px; cursor: pointer; transition: all 0.3s ease;">
                    <p style="margin-top: 10px; font-weight: bold; color: #333;">Cultural Festival</p>
                </div>
                <div class="event-card" style="text-align: center; background: white; padding: 15px; border-radius: 10px; box-shadow: 0 4px 8px rgba(0,0,0,0.1); transition: transform 0.3s ease;">
                    <img src="Module/Module 1/HTML 5/LocalCommunityEventPortal/image/marathon.jpg" alt="Marathon" title="Marathon" class="event-image" ondblclick="enlargeImage(this)" style="width: 100%; height: 200px; object-fit: cover; border-radius: 8px; cursor: pointer; transition: all 0.3s ease;">
                    <p style="margin-top: 10px; font-weight: bold; color: #333;">Marathon</p>
                </div>
            </div>
        </section>

        <section id="news" class="news-section">
            <h2 class="section-title">Community News</h2>
            <article class="news-content">
                <h3>Latest Updates</h3>
                <p>Welcome to our community news section! We're excited to announce several upcoming events and initiatives that will bring our community together. From cultural celebrations to educational workshops, there's something for everyone to enjoy.</p>
                <p>Our community center has been renovated and is now ready to host larger events. We've added new facilities including a modern kitchen, expanded meeting rooms, and improved accessibility features. Come visit us and see the changes for yourself!</p>
            </article>
        </section>

        <section id="registration">
            <h2 class="section-title">Event Registration</h2>
            <form class="registration-form" id="eventForm" onsubmit="return validateForm(event)">
                <div class="form-group">
                    <label for="name">Name:</label>
                    <input type="text" id="name" name="name" required autofocus placeholder="Enter your full name">
                </div>
                <div class="form-group">
                    <label for="email">Email:</label>
                    <input type="email" id="email" name="email" required placeholder="Enter your email">
                </div>
                <div class="form-group">
                    <label for="phone">Phone:</label>
                    <input type="tel" id="phone" name="phone" onblur="validatePhone(this)" placeholder="Enter your phone number">
                </div>
                <div class="form-group">
                    <label for="date">Event Date:</label>
                    <input type="date" id="date" name="date" required>
                </div>
                <div class="form-group">
                    <label for="eventType">Event Type:</label>
                    <select id="eventType" name="eventType" onchange="updateFee(this)" required>
                        <option value="">Select an event</option>
                        <option value="festival">Community Festival</option>
                        <option value="art">Art Exhibition</option>
                        <option value="food">Food Fair</option>
                        <option value="music">Music Concert</option>
                        <option value="sports">Sports Day</option>
                        <option value="workshop">Skill Workshop</option>
                    </select>
                </div>
                <div class="form-group">
                    <label for="message">Message:</label>
                    <textarea id="message" name="message" onkeyup="countCharacters(this)" placeholder="Any special requirements?"></textarea>
                    <p>Character count: <span id="charCount">0</span></p>
                </div>
                <button type="submit">Register</button>
                <output id="confirmation"></output>
            </form>
        </section>

        <!-- Admin Table Section -->
        <section id="admin">
            <h2 class="section-title">Event Management</h2>
            <table class="admin-table">
                <thead>
                    <tr>
                        <th>Event Name</th>
                        <th>Date</th>
                        <th>Location</th>
                        <th>Capacity</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td>Music Festival</td>
                        <td>2024-04-15</td>
                        <td>City Park</td>
                        <td>1000</td>
                    </tr>
                    <tr>
                        <td>Food Fair</td>
                        <td>2024-04-20</td>
                        <td>Downtown Square</td>
                        <td>500</td>
                    </tr>
                    <tr>
                        <td>Art Show</td>
                        <td>2024-04-25</td>
                        <td>Community Center</td>
                        <td>300</td>
                    </tr>
                </tbody>
            </table>
        </section>

        <section id="video">
            <h2>Event Promo</h2>
            <div class="video-container">
                <iframe id="youtubePlayer" width="560" height="315" src="https://www.youtube.com/embed/7fGDMTp0v6s?enablejsapi=1" title="Event Promo Video" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>
                <p id="videoStatus"></p>
                <div class="video-controls">
                    <button onclick="playVideo()">Play</button>
                    <button onclick="pauseVideo()">Pause</button>
                    <button onclick="restartVideo()">Restart</button>
                </div>
            </div>
        </section>

        <section id="location" style="padding: 20px; background: rgba(255, 255, 255, 0.9); border-radius: 10px; margin: 20px auto; max-width: 1200px;">
            <h2 style="text-align: center; color: #333; margin-bottom: 30px; font-size: 2em;">Find Nearby Events</h2>
            <div style="text-align: center; margin-bottom: 20px;">
                <button onclick="findNearbyEvents()" style="padding: 12px 24px; background-color: #4CAF50; color: white; border: none; border-radius: 5px; cursor: pointer; font-size: 1.1em; transition: background-color 0.3s ease;">Find Nearby Events</button>
            </div>
            <p id="locationStatus" style="text-align: center; color: #666; margin: 15px 0;"></p>
            <div id="nearbyEvents" style="margin-top: 20px;">
                <h3 style="text-align: center; color: #333; margin-bottom: 20px;">Events Near You</h3>
                <div id="eventsList" style="display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 20px; padding: 20px;"></div>
            </div>
        </section>

        <section id="preferences" style="padding: 20px; background: rgba(255, 255, 255, 0.9); border-radius: 10px; margin: 20px auto; max-width: 1200px;">
            <h2 style="text-align: center; color: #333; margin-bottom: 30px; font-size: 2em;">Your Preferences</h2>
            <div style="text-align: center;">
                <button onclick="clearPreferences()" style="padding: 12px 24px; background-color: #f44336; color: white; border: none; border-radius: 5px; cursor: pointer; font-size: 1.1em; transition: background-color 0.3s ease;">Clear Preferences</button>
            </div>
        </section>
    </main>

    <!-- Footer Section -->
    <footer>
        <p>&copy; 2024 Local Community Event Portal. All rights reserved.</p>
    </footer>

    <script>
        function validatePhone(input) {
            const phoneRegex = /^\d{10}$/;
            if (!phoneRegex.test(input.value)) {
                alert('Please enter a valid 10-digit phone number');
                input.focus();
            }
        }

        function validateForm(event) {
            event.preventDefault();
            const form = event.target;
            let isValid = true;
            let errorMessage = '';

            // Name validation
            const name = form.querySelector('#name');
            if (!name.value.trim()) {
                errorMessage += 'Name is required\n';
                isValid = false;
                name.style.borderColor = '#f44336';
            } else {
                name.style.borderColor = '#4CAF50';
            }

            // Email validation
            const email = form.querySelector('#email');
            const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
            if (!emailRegex.test(email.value)) {
                errorMessage += 'Please enter a valid email address\n';
                isValid = false;
                email.style.borderColor = '#f44336';
            } else {
                email.style.borderColor = '#4CAF50';
            }

            // Phone validation
            const phone = form.querySelector('#phone');
            const phoneRegex = /^\d{10}$/;
            if (!phoneRegex.test(phone.value)) {
                errorMessage += 'Please enter a valid 10-digit phone number\n';
                isValid = false;
                phone.style.borderColor = '#f44336';
            } else {
                phone.style.borderColor = '#4CAF50';
            }

            // Event type validation
            const eventType = form.querySelector('#eventType');
            if (!eventType.value) {
                errorMessage += 'Please select an event type\n';
                isValid = false;
                eventType.style.borderColor = '#f44336';
            } else {
                eventType.style.borderColor = '#4CAF50';
            }

            if (!isValid) {
                alert(errorMessage);
                return false;
            }

            // If valid, show confirmation
            showConfirmation();
            return true;
        }

        function updateFee(select) {
            const fees = {
                festival: '$20',
                art: '$15',
                food: '$25',
                music: '$30',
                sports: '$10',
                workshop: '$35'
            };
            const selectedFee = fees[select.value] || 'Select an event to see fee';
            alert(`Event Fee: ${selectedFee}`);
            
            localStorage.setItem('preferredEvent', select.value);
        }

        function countCharacters(textarea) {
            const count = textarea.value.length;
            const maxLength = 500;
            const charCount = document.getElementById('charCount');
            charCount.textContent = count;
            
            if (count > maxLength) {
                charCount.style.color = '#f44336';
                textarea.style.borderColor = '#f44336';
            } else {
                charCount.style.color = '#666';
                textarea.style.borderColor = '#ddd';
            }
        }

        function enlargeImage(img) {
            const isEnlarged = img.style.transform === 'scale(1.5)';
            
            if (isEnlarged) {
                img.style.transform = 'scale(1)';
                img.style.zIndex = '1';
                img.style.boxShadow = '0 2px 5px rgba(0,0,0,0.2)';
                img.style.cursor = 'pointer';
            } else {
                img.style.transform = 'scale(1.5)';
                img.style.zIndex = '100';
                img.style.boxShadow = '0 5px 15px rgba(0,0,0,0.3)';
                img.style.cursor = 'zoom-out';
            }
        }

        function showConfirmation() {
            const confirmation = document.getElementById('confirmation');
            confirmation.textContent = 'Registration submitted successfully!';
            confirmation.style.color = '#4CAF50';
            confirmation.style.padding = '10px';
            confirmation.style.marginTop = '10px';
            confirmation.style.backgroundColor = '#E8F5E9';
            confirmation.style.borderRadius = '5px';
        }

        function findNearbyEvents() {
            if (!navigator.geolocation) {
                document.getElementById('locationStatus').textContent = 
                    'Geolocation is not supported by your browser';
                return;
            }

            const options = {
                enableHighAccuracy: true,
                timeout: 10000,
                maximumAge: 0
            };

            document.getElementById('locationStatus').textContent = 'Getting your location...';
            document.getElementById('locationStatus').style.color = '#666';

            navigator.geolocation.getCurrentPosition(
                (position) => {
                    const { latitude, longitude } = position.coords;
                    document.getElementById('locationStatus').textContent = 
                        `Your location: ${latitude.toFixed(4)}, ${longitude.toFixed(4)}`;
                    document.getElementById('locationStatus').style.color = '#4CAF50';
                    
                    const nearbyEvents = findEventsNearLocation(latitude, longitude);
                    displayNearbyEvents(nearbyEvents);
                },
                (error) => {
                    let errorMessage = 'Error getting location: ';
                    switch(error.code) {
                        case error.PERMISSION_DENIED:
                            errorMessage += 'Please allow location access to find nearby events.';
                            break;
                        case error.POSITION_UNAVAILABLE:
                            errorMessage += 'Location information is unavailable.';
                            break;
                        case error.TIMEOUT:
                            errorMessage += 'Location request timed out.';
                            break;
                        default:
                            errorMessage += 'An unknown error occurred.';
                    }
                    document.getElementById('locationStatus').textContent = errorMessage;
                    document.getElementById('locationStatus').style.color = '#f44336';
                },
                options
            );
        }

        function findEventsNearLocation(lat, lng) {
            return [
                {
                    name: 'Community Festival',
                    distance: '0.5 miles',
                    date: '2024-04-15',
                    location: 'City Park'
                },
                {
                    name: 'Art Exhibition',
                    distance: '1.2 miles',
                    date: '2024-04-20',
                    location: 'Community Center'
                },
                {
                    name: 'Food Fair',
                    distance: '2.0 miles',
                    date: '2024-04-25',
                    location: 'Downtown Square'
                }
            ];
        }

        function displayNearbyEvents(events) {
            const eventsList = document.getElementById('eventsList');
            eventsList.innerHTML = '';

            if (events.length === 0) {
                eventsList.innerHTML = '<p style="text-align: center; color: #666;">No events found nearby.</p>';
                return;
            }

            const eventsHTML = events.map(event => `
                <div style="background: white; padding: 20px; border-radius: 10px; box-shadow: 0 4px 8px rgba(0,0,0,0.1);">
                    <h4 style="color: #333; margin-bottom: 10px;">${event.name}</h4>
                    <p style="color: #666; margin: 5px 0;"><strong>Distance:</strong> ${event.distance}</p>
                    <p style="color: #666; margin: 5px 0;"><strong>Date:</strong> ${event.date}</p>
                    <p style="color: #666; margin: 5px 0;"><strong>Location:</strong> ${event.location}</p>
                </div>
            `).join('');

            eventsList.innerHTML = eventsHTML;
        }

        function clearPreferences() {
            localStorage.clear();
            sessionStorage.clear();
            alert('All preferences have been cleared');
        }

        window.onload = function() {
            const savedEvent = localStorage.getItem('preferredEvent');
            if (savedEvent) {
                document.getElementById('eventType').value = savedEvent;
            }
        };

        let player;
        function onYouTubeIframeAPIReady() {
            player = new YT.Player('youtubePlayer', {
                events: {
                    'onReady': onPlayerReady,
                    'onStateChange': onPlayerStateChange,
                    'onError': onPlayerError
                }
            });
        }

        function onPlayerReady(event) {
            document.getElementById('videoStatus').textContent = 'Video ready to play';
            document.getElementById('videoStatus').style.color = '#4CAF50';
        }

        function onPlayerStateChange(event) {
            const status = document.getElementById('videoStatus');
            switch(event.data) {
                case YT.PlayerState.PLAYING:
                    status.textContent = 'Video is playing';
                    status.style.color = '#4CAF50';
                    break;
                case YT.PlayerState.PAUSED:
                    status.textContent = 'Video is paused';
                    status.style.color = '#FFA500';
                    break;
                case YT.PlayerState.ENDED:
                    status.textContent = 'Video ended';
                    status.style.color = '#666';
                    break;
            }
        }

        function onPlayerError(event) {
            document.getElementById('videoStatus').textContent = 'Error playing video';
            document.getElementById('videoStatus').style.color = '#f44336';
        }

        function playVideo() {
            if (player && player.playVideo) {
                player.playVideo();
            }
        }

        function pauseVideo() {
            if (player && player.pauseVideo) {
                player.pauseVideo();
            }
        }

        function restartVideo() {
            if (player && player.seekTo) {
                player.seekTo(0);
                player.playVideo();
            }
        }

        // Load YouTube API
        var tag = document.createElement('script');
        tag.src = "https://www.youtube.com/iframe_api";
        var firstScriptTag = document.getElementsByTagName('script')[0];
        firstScriptTag.parentNode.insertBefore(tag, firstScriptTag);
    </script>
</body>
</html> 